<section
  id="metodologia"
  class="relative px-4 md:px-6 bg-black text-white
         mt-16
         mb:pb-24"
>
  <h2 class="font-title text-center text-4xl md:text-6xl font-extrabold uppercase mb-12 md:mb-16">
    Metodología
  </h2>

  <!-- Flechas (solo desktop) -->
  <button
    id="meta-prev"
    class="meta-arrow left flex"
    aria-label="Anterior"
  >
    ‹
  </button>

  <button
    id="meta-next"
    class="meta-arrow right flex"
    aria-label="Siguiente"
  >
    ›
  </button>

  <!-- Contenedor -->
  <div class="max-w-6xl mx-auto overflow-hidden">
    <div
      id="meta-list"
      class="flex justify-start md:justify-center
             gap-10 md:gap-20
             transition-all duration-300
             overflow-x-auto md:overflow-visible
             snap-x snap-mandatory md:snap-none
             px-4 md:px-0"
    >
      <div class="meta-item snap-center">
        <img src="/Secciones/Metodologia/EscucharyConocer.png" />
        <p>Escuchar y conocer<br />tu visión</p>
      </div>

      <div class="meta-item snap-center">
        <img src="/Secciones/Metodologia/AnalisisEstrategico.png" />
        <p>Análisis<br />estratégico</p>
      </div>

      <div class="meta-item snap-center">
        <img src="/Secciones/Metodologia/ConceptoCreativo.png" />
        <p>Concepto<br />creativo</p>
      </div>

      <div class="meta-item snap-center">
        <img src="/Secciones/Metodologia/PropuestayPlaneacion.png" />
        <p>Propuesta y<br />planeación</p>
      </div>

      <div class="meta-item snap-center">
        <img src="/Secciones/Metodologia/Preproduccion.png" />
        <p>Pre-<br />producción</p>
      </div>
    </div>
  </div>
</section>


<style>
  .meta-item {
    min-width: 160px;
    text-align: center;
  }

  .meta-item img {
    width: 115px;
    height: 115px;
    margin: 0 auto 12px;
  }

  .meta-item p {
    font-size: 0.875rem;
    font-weight: 600;
  }

  .meta-arrow {
  position: absolute;
  top: 60%;
  transform: translateY(-50%);
  width: 48px;
  height: 120px;

  align-items: center;
  justify-content: center;

  font-size: 42px;
  color: #fff;

  background: transparent;
  cursor: pointer;
  z-index: 20;

  transition: color 0.2s ease;
}

.meta-arrow.left {
  left: 0px;
}

.meta-arrow.right {
  right: 0px;
}

@media (min-width: 768px) {
  .meta-arrow.left {
    left: 100px;
  }

  .meta-arrow.right {
    right: 100px;
  }
}

.meta-arrow:hover {
  color: #bdbdbd;
}

#meta-list {
  cursor: grab;
  user-select: none;
}

.meta-item img{
  pointer-events: none;
  user-drag: none;
  -webkit-user-drag: none;
  user-select: none;
}

</style>

<script is:inline>
(() => {
  const list = document.getElementById('meta-list');
  const prev = document.getElementById('meta-prev');
  const next = document.getElementById('meta-next');

  function goNext() {
    const first = list.firstElementChild;
    list.appendChild(first);
  }

  function goPrev() {
    const last = list.lastElementChild;
    list.insertBefore(last, list.firstElementChild);
  }

  next.addEventListener('click', goNext);
  prev.addEventListener('click', goPrev);

  // -------------------
  // DRAG / SWIPE
  // -------------------

  let startX = 0;
  let isDown = false;

  list.addEventListener('pointerdown', (e) => {
    isDown = true;
    startX = e.clientX;
    list.style.cursor = 'grabbing';
  });

  list.addEventListener('pointerup', (e) => {
    if (!isDown) return;
    isDown = false;

    const diff = e.clientX - startX;

    if (diff > 60) {
      goPrev(); // arrastró a la derecha
    } else if (diff < -60) {
      goNext(); // arrastró a la izquierda
    }

    list.style.cursor = 'grab';
  });

  list.addEventListener('pointerleave', () => {
    isDown = false;
    list.style.cursor = 'grab';
  });

})();
</script>

